version: 2

models:
  - name: int_sales_margin
    description: combined product and sales
    columns:
      - name: products_id
        description: id for products
        tests:
         - not_null
      - name: date_date
        description: date of sales
        tests:
         - not_null
      - name: orders_id
        description: id for orders
        tests:
         - not_null
      - name: revenue 
        description: revenue for each order
        tests:
         - not_null
      - name: quantity
        description: nb of products purchased per order
        tests:
         - not_null
      - name: purchase_price
        description: price products were bought for
        tests:
         - not_null
      - name: margin
        description: money made from each sales
        tests:
         - not_null
      - name: margin_percent
        description: percent of the revenue is profit
        tests:
         - not_null
    tests:
      - unique:
         column_name: "(products_id || '_' || orders_id)"
  - name: int_orders_margin
    description: margin per order
    columns:
     - name: orders_id
       description: id for orders
       tests:
         - unique
         - not_null
     - name: date_date
       description: date of sales
       tests:
         - not_null
     - name: revenue 
       description: revenue for each order
       tests:
         - not_null
     - name: quantity
       description: nb of products purchased per order
       tests:
         - not_null
     - name: purchase_cost
       description: total cost for a specific product 
       tests:
         - not_null
     - name: margin
       description: money made from each sales
       tests:
         - not_null
  - name: int_orders_operational
    description: margin - logistics cost  per order
    columns:
     - name: orders_id
       description: id for orders
       tests:
         - unique
         - not_null
     - name: date_date
       description: date of sales
       tests:
         - not_null
     - name: operational_margin
       description: margin - shipping costs
       tests:
         - not_null
     - name: revenue 
       description: revenue for each order
       tests:
         - not_null
     - name: quantity
       description: nb of products purchased per order
       tests:
         - not_null
     - name: purchase_cost
       description: total cost for a specific product 
       tests:
         - not_null
     - name: margin
       description: money made from each sales
       tests:
         - not_null
  - name: int_campaigns
    descriptions: performance of alla marketing campaigns
    columns:
     - name: date_date
       description: date of campaign performance
       tests:
        - not_null
     - name: paid_source
       description: source of campaign performance
       tests:
        - not_null       
     - name: campaign_key
       description: id of campaign 
       tests:
        - not_null
     - name: campaign_name
       description: name of campaign
       tests:
        - not_null
     - name: ads_cost
       description: cost of the campaign
       tests:
        - not_null
     - name: impression
       description: number of impressions generated by the campaign
       tests:
        - not_null
     - name: click
       description: number of clicks generated by the campaign
       tests:
        - not_null
  - name: int_campaigns_day
    description: campaigns performance per day
    column:
      - name: date_date
        description: day of the each of campaign performance
        tests:
        - not_null
        - unique
      - name: ads_cost
        description: total costs per day
        tests:
        - not_null
      - name: impression
        description: total impressions per day
        tests:
        - not_null
      - name: click
        description: total clicks per day
        tests:
        - not_null
